# BSSM Captive Portal MCP Server

BSSM Captive Portalì˜ Django ë°±ì—”ë“œì™€ ì—°ë™í•˜ì—¬ AI ì—ì´ì „íŠ¸ë¥¼ í†µí•œ ì‹œìŠ¤í…œ ê´€ë¦¬ë¥¼ ì œê³µí•˜ëŠ” MCP(Model Context Protocol) ì„œë²„ì…ë‹ˆë‹¤.

## ê°œìš”

ì´ MCP ì„œë²„ë¥¼ ì‚¬ìš©í•˜ë©´ Claude Desktopì´ë‚˜ ë‹¤ë¥¸ AI ì—ì´ì „íŠ¸ë¥¼ í†µí•´ ìì—°ì–´ë¡œ BSSM Captive Portal ì‹œìŠ¤í…œì„ ê´€ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### ì£¼ìš” ê¸°ëŠ¥

#### ğŸ”¹ ì¼ë°˜ ì‚¬ìš©ì ê¸°ëŠ¥ (10ê°œ ë„êµ¬)
- **ë‚´ ì •ë³´ ê´€ë¦¬**: ì •ë³´ ì¡°íšŒ, ë¹„ë°€ë²ˆí˜¸ ë³€ê²½
- **ì¥ì¹˜ ê´€ë¦¬**: ë‚´ ì¥ì¹˜ ë“±ë¡/ìˆ˜ì •/ì‚­ì œ, ëª©ë¡ ì¡°íšŒ
- **ëŒ€ì—¬ ê´€ë¦¬**: ëŒ€ì—¬ ì‹ ì²­, ë°˜ë‚© ì‹ ì²­, ë‚´ì—­ ì¡°íšŒ, ì‚¬ìš© ê°€ëŠ¥ ì¥ë¹„ ì¡°íšŒ

#### ğŸ”¹ ê´€ë¦¬ì ê¸°ëŠ¥ (12ê°œ ë„êµ¬)
- **ì‚¬ìš©ì ê´€ë¦¬**: ìƒì„±, ì¡°íšŒ, ìˆ˜ì •, ì‚­ì œ, ë¹„ë°€ë²ˆí˜¸ ì´ˆê¸°í™”
- **ëŒ€ì—¬ ê´€ë¦¬**: ìš”ì²­ ìŠ¹ì¸/ê±°ì ˆ, ë°˜ë‚© ì²˜ë¦¬, ì „ì²´ ë‚´ì—­ ì¡°íšŒ
- **ì¥ë¹„ ê´€ë¦¬**: ì¥ë¹„ ë“±ë¡, ì „ì²´ ëª©ë¡ ì¡°íšŒ

## ì„¤ì¹˜

### 1. ì˜ì¡´ì„± ì„¤ì¹˜

```bash
cd mcp-server
pip install -r requirements.txt
```

### 2. í™˜ê²½ ë³€ìˆ˜ ì„¤ì •

```bash
cp .env.example .env
```

`.env` íŒŒì¼ì„ í¸ì§‘í•˜ì—¬ Django ë°±ì—”ë“œ URLì„ ì„¤ì •í•©ë‹ˆë‹¤:

```env
DJANGO_API_URL=http://localhost:8000
DJANGO_API_TIMEOUT=30
MCP_SERVER_NAME=bssm-captive-mcp
MCP_SERVER_VERSION=1.0.0
```

## ì‚¬ìš© ë°©ë²•

### ì§ì ‘ ì‹¤í–‰ (í…ŒìŠ¤íŠ¸ìš©)

```bash
cd /home/bssm/BssmCaptive/mcp-server
python server.py
```

ì‹¤í–‰ ì‹œ ì‚¬ìš©ìëª…ê³¼ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ë©´ MCP ì„œë²„ê°€ ì‹œì‘ë©ë‹ˆë‹¤.

### Claude Desktopê³¼ ì—°ë™

Claude Desktopì˜ ì„¤ì • íŒŒì¼ì„ ìˆ˜ì •í•©ë‹ˆë‹¤:

**macOS**: `~/Library/Application Support/Claude/claude_desktop_config.json`
**Windows**: `%APPDATA%\Claude\claude_desktop_config.json`

```json
{
  "mcpServers": {
    "bssm-captive": {
      "command": "python",
      "args": ["/home/bssm/BssmCaptive/mcp-server/server.py"],
      "env": {
        "DJANGO_API_URL": "http://localhost:8000"
      }
    }
  }
}
```

## ì‚¬ìš© ì˜ˆì‹œ

### ì¼ë°˜ ì‚¬ìš©ì

```
ì‚¬ìš©ì: "ë‚´ ì¥ì¹˜ ëª©ë¡ì„ ë³´ì—¬ì¤˜"
â†’ tool: list_my_devices ì‹¤í–‰
â†’ ê²°ê³¼: ë“±ë¡ëœ ì¥ì¹˜ 3ê°œ í‘œì‹œ

ì‚¬ìš©ì: "MAC ì£¼ì†Œ AA:BB:CC:DD:EE:FFë¡œ MyLaptopì´ë¼ëŠ” ì¥ì¹˜ë¥¼ ë“±ë¡í•´ì¤˜"
â†’ tool: register_my_device ì‹¤í–‰
â†’ ê²°ê³¼: ì¥ì¹˜ ë“±ë¡ ì™„ë£Œ, IP ì£¼ì†Œ í• ë‹¹ë¨

ì‚¬ìš©ì: "ëŒ€ì—¬ ê°€ëŠ¥í•œ ë§¥ë¶ì„ ì°¾ì•„ì¤˜"
â†’ tool: view_available_equipment (equipment_type="MACBOOK") ì‹¤í–‰
â†’ ê²°ê³¼: ì‚¬ìš© ê°€ëŠ¥í•œ ë§¥ë¶ 2ëŒ€ í‘œì‹œ

ì‚¬ìš©ì: "ID 5ë²ˆ ì¥ë¹„ë¥¼ ëŒ€ì—¬ ì‹ ì²­í•´ì¤˜"
â†’ tool: request_rental (equipment_id=5) ì‹¤í–‰
â†’ ê²°ê³¼: ëŒ€ì—¬ ì‹ ì²­ ì™„ë£Œ, ê´€ë¦¬ì ìŠ¹ì¸ ëŒ€ê¸°
```

### ê´€ë¦¬ì

```
ê´€ë¦¬ì: "ëŒ€ê¸° ì¤‘ì¸ ëŒ€ì—¬ ìš”ì²­ì„ ë³´ì—¬ì¤˜"
â†’ tool: admin_list_rental_requests (status="PENDING") ì‹¤í–‰
â†’ ê²°ê³¼: ëŒ€ê¸° ì¤‘ì¸ ìš”ì²­ 5ê±´ í‘œì‹œ

ê´€ë¦¬ì: "ID 10ë²ˆ ëŒ€ì—¬ ìš”ì²­ì„ ìŠ¹ì¸í•´ì¤˜"
â†’ tool: admin_approve_rental_request (request_id=10) ì‹¤í–‰
â†’ ê²°ê³¼: ìš”ì²­ ìŠ¹ì¸ ì™„ë£Œ, ëŒ€ì—¬ ì‹œì‘

ê´€ë¦¬ì: "usernameì´ 'student1'ì¸ ì‚¬ìš©ìë¥¼ ì°¾ì•„ì¤˜"
â†’ tool: admin_list_users (search="student1") ì‹¤í–‰
â†’ ê²°ê³¼: ì¼ì¹˜í•˜ëŠ” ì‚¬ìš©ì ì •ë³´ í‘œì‹œ

ê´€ë¦¬ì: "ìƒˆ ì‚¬ìš©ì 'newstudent', ë¹„ë°€ë²ˆí˜¸ 'password123', ì´ë©”ì¼ 'new@bssm.hs.kr'ë¡œ ë§Œë“¤ì–´ì¤˜"
â†’ tool: admin_create_user ì‹¤í–‰
â†’ ê²°ê³¼: ì‚¬ìš©ì ìƒì„± ì™„ë£Œ
```

## ë„êµ¬ ëª©ë¡

### ì¼ë°˜ ì‚¬ìš©ì ë„êµ¬

| ë„êµ¬ ì´ë¦„ | ì„¤ëª… |
|---------|------|
| `get_my_info` | ë‚´ ì •ë³´ ì¡°íšŒ |
| `change_my_password` | ë¹„ë°€ë²ˆí˜¸ ë³€ê²½ |
| `list_my_devices` | ë‚´ ì¥ì¹˜ ëª©ë¡ ì¡°íšŒ |
| `register_my_device` | ìƒˆ ì¥ì¹˜ ë“±ë¡ |
| `update_my_device` | ë‚´ ì¥ì¹˜ ì •ë³´ ìˆ˜ì • |
| `delete_my_device` | ë‚´ ì¥ì¹˜ ì‚­ì œ |
| `list_my_rentals` | ë‚´ ëŒ€ì—¬ ë‚´ì—­ ì¡°íšŒ |
| `view_available_equipment` | ëŒ€ì—¬ ê°€ëŠ¥ ì¥ë¹„ ì¡°íšŒ |
| `request_rental` | ì¥ë¹„ ëŒ€ì—¬ ì‹ ì²­ |
| `request_return` | ì¥ë¹„ ë°˜ë‚© ì‹ ì²­ |

### ê´€ë¦¬ì ë„êµ¬

| ë„êµ¬ ì´ë¦„ | ì„¤ëª… |
|---------|------|
| `admin_list_users` | ì‚¬ìš©ì ëª©ë¡ ì¡°íšŒ |
| `admin_create_user` | ìƒˆ ì‚¬ìš©ì ìƒì„± |
| `admin_update_user` | ì‚¬ìš©ì ì •ë³´ ìˆ˜ì • |
| `admin_delete_user` | ì‚¬ìš©ì ì‚­ì œ |
| `admin_reset_user_password` | ì‚¬ìš©ì ë¹„ë°€ë²ˆí˜¸ ì´ˆê¸°í™” |
| `admin_list_rental_requests` | ëŒ€ì—¬ ìš”ì²­ ëª©ë¡ ì¡°íšŒ |
| `admin_approve_rental_request` | ëŒ€ì—¬ ìš”ì²­ ìŠ¹ì¸ |
| `admin_reject_rental_request` | ëŒ€ì—¬ ìš”ì²­ ê±°ì ˆ |
| `admin_list_all_rentals` | ì „ì²´ ëŒ€ì—¬ ë‚´ì—­ ì¡°íšŒ |
| `admin_process_return` | ë°˜ë‚© ì²˜ë¦¬ |
| `admin_list_all_equipment` | ì „ì²´ ì¥ë¹„ ëª©ë¡ ì¡°íšŒ |
| `admin_create_equipment` | ìƒˆ ì¥ë¹„ ë“±ë¡ |

## ì•„í‚¤í…ì²˜

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   AI Agent      â”‚
â”‚   (Claude)      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚ MCP Protocol
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  MCP Server     â”‚
â”‚  (Python)       â”‚
â”‚  - Tools        â”‚
â”‚  - Auth         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚ HTTP/REST + JWT
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Django Backend  â”‚
â”‚ (Gunicorn)      â”‚
â”‚ Port: 8000      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    MySQL DB     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ë³´ì•ˆ

- **JWT ì¸ì¦**: Django ë°±ì—”ë“œì˜ JWT í† í° ì‚¬ìš©
- **ìë™ í† í° ê°±ì‹ **: í† í° ë§Œë£Œ 5ë¶„ ì „ ìë™ ê°±ì‹ 
- **ê¶Œí•œ ê²€ì¦**: ê° ë„êµ¬ ì‹¤í–‰ ì „ ì‚¬ìš©ì ê¶Œí•œ í™•ì¸
- **ê´€ë¦¬ì ë„êµ¬ ë³´í˜¸**: `is_staff=True` ì‚¬ìš©ìë§Œ ì ‘ê·¼ ê°€ëŠ¥

## ë¬¸ì œ í•´ê²°

### Django ë°±ì—”ë“œì— ì—°ê²°í•  ìˆ˜ ì—†ìŒ

1. Django ì„œë²„ê°€ ì‹¤í–‰ ì¤‘ì¸ì§€ í™•ì¸:
   ```bash
   curl http://localhost:8000/api/
   ```

2. `.env` íŒŒì¼ì˜ `DJANGO_API_URL` í™•ì¸

### ì¸ì¦ ì‹¤íŒ¨

1. ì‚¬ìš©ìëª…ê³¼ ë¹„ë°€ë²ˆí˜¸ í™•ì¸
2. Djangoì—ì„œ í•´ë‹¹ ì‚¬ìš©ìê°€ ì¡´ì¬í•˜ëŠ”ì§€ í™•ì¸
3. Djangoì˜ JWT ì„¤ì • í™•ì¸

### ë„êµ¬ ì‹¤í–‰ ì˜¤ë¥˜

1. MCP ì„œë²„ ë¡œê·¸ í™•ì¸ (stderr)
2. Django ì„œë²„ ë¡œê·¸ í™•ì¸
3. API ì‘ë‹µ í™•ì¸

## ê°œë°œ

### ìƒˆ ë„êµ¬ ì¶”ê°€

1. `tools/user/` ë˜ëŠ” `tools/admin/` ì— í•¨ìˆ˜ ì‘ì„±
2. `server.py`ì˜ `list_tools()`ì— ë„êµ¬ ì •ì˜ ì¶”ê°€
3. `server.py`ì˜ `call_tool()`ì— í•¨ìˆ˜ í˜¸ì¶œ ì¶”ê°€

### ë””ë ‰í† ë¦¬ êµ¬ì¡°

```
mcp-server/
â”œâ”€â”€ server.py              # MCP ì„œë²„ ë©”ì¸
â”œâ”€â”€ config.py              # ì„¤ì • ê´€ë¦¬
â”œâ”€â”€ auth.py                # JWT ì¸ì¦
â”œâ”€â”€ requirements.txt       # ì˜ì¡´ì„±
â”œâ”€â”€ .env.example           # í™˜ê²½ ë³€ìˆ˜ ì˜ˆì œ
â”œâ”€â”€ tools/                 # MCP ë„êµ¬
â”‚   â”œâ”€â”€ user/              # ì¼ë°˜ ì‚¬ìš©ì ë„êµ¬
â”‚   â”‚   â””â”€â”€ profile_tools.py
â”‚   â””â”€â”€ admin/             # ê´€ë¦¬ì ë„êµ¬
â”‚       â”œâ”€â”€ user_tools.py
â”‚       â””â”€â”€ rental_tools.py
â”œâ”€â”€ resources/             # MCP ë¦¬ì†ŒìŠ¤ (ë¯¸êµ¬í˜„)
â”œâ”€â”€ prompts/               # MCP í”„ë¡¬í”„íŠ¸ (ë¯¸êµ¬í˜„)
â””â”€â”€ utils/                 # ìœ í‹¸ë¦¬í‹°
    â””â”€â”€ api_client.py      # Django API í´ë¼ì´ì–¸íŠ¸
```

## ë¼ì´ì„ ìŠ¤

ì´ í”„ë¡œì íŠ¸ëŠ” ë¶€ì‚°ì†Œí”„íŠ¸ì›¨ì–´ë§ˆì´ìŠ¤í„°ê³ ë“±í•™êµì˜ ì†Œìœ ì…ë‹ˆë‹¤.

## ì§€ì›

ë¬¸ì œê°€ ë°œìƒí•˜ë©´ ì´ìŠˆë¥¼ ë“±ë¡í•´ì£¼ì„¸ìš”.
